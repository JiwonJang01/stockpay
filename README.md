# 🪙 모의 주식 투자 기반 가상 결제 서비스
가상의 주식 시장과 쇼핑몰, 이 둘 사이에서 주삭을 현금화하는 가상의 중간 처리 기관을 구축한다. </br>
이로써 쇼핑몰에서 주식을 통해 물건을 구매할 수 있는 서비스를 구현한다.</br></br>

## 프로젝트 기능 및 설계

### 모의투자 계좌 기능
- 로그인한 사용자는 가상의 초기 자금 1,00만원을 받아 모의투자를 시작할 수 있다.
- 사용자는 실시간 주식 시세를 기반으로 주식 매수/매도 주문을 할 수 있다.
- 매수 주문 시 보유 현금 잔고를 확인하여 잔고 부족 시 주문이 거부된다.
- 매도 주문 시 보유 주식 수량을 확인하여 보유량 부족 시 주문이 거부된다.
- 모든 매수/매도 주문은 65%~75% 확률로 체결되며, 미체결 시 3분마다 자동으로 재시도한다.
- 5번 연속 미체결 시 다음 시도는 100% 체결 처리된다.
- 주문 상태는 대기/체결/취소/실패로 구분되어 관리된다.

### 포트폴리오 관리 기능
- 로그인한 사용자는 자신의 전체 포트폴리오 현황을 실시간으로 조회할 수 있다.
- 포트폴리오에는 현금 잔고, 보유 주식 목록, 각 종목별 보유 수량과 평균 매입가가 표시된다.
- 실시간 주가를 반영한 현재 평가액, 총 투자 금액, 총 손익금, 수익률이 계산되어 표시된다.
- 종목별 상세 정보를 확인할 수 있다.

### 거래 내역 조회 기능
- 사용자는 자신의 모든 거래 내역을 시간순으로 조회할 수 있다.
- 거래 내역에는 거래 일시, 종목명, 매수/매도 구분, 체결가, 수량, 거래 금액이 기록된다.
- 거래 상태(체결 완료/대기 중/취소)별로 필터링하여 조회 가능하다.
- 특정 기간 또는 특정 종목으로 거래 내역을 검색할 수 있다.

### 실시간 주가 조회 기능
- 모든 사용자는 실시간 주식 시세를 조회할 수 있다.
- 코스피, 코스닥 주요 종목들의 현재가, 전일 대비 등락액/등락률, 거래량 정보가 제공된다.
- 종목명 또는 종목코드로 특정 주식을 검색할 수 있다.
- 주가 정보는 30초마다 업데이트된다.
- 주식 시장 개장 시간 중에만 실시간 업데이트되며, 장외 시간에는 전일 종가가 표시된다.

### 주식 기반 결제 기능
- 사용자는 보유한 주식을 활용하여 가상 쇼핑몰에서 상품을 구매할 수 있다.
- 상품 결제는 주식으로 이루어진다.
- 결제 가능한 주식 목록이 표시되며, 각 주식의 현재 시세를 기준으로 필요 수량이 자동 계산된다.
- 여러 종목을 조합하여 결제할 수 있으며, 부족한 금액만큼 다른 종목으로 보완 가능하다.
- 결제 진행 시 선택한 주식들이 자동으로 매도 주문 접수되며, 매도 체결 시 결제가 완료된다.
- 주식 매도 실패 시 자동 재시도되며, 최종 실패 시 결제가 취소되고 주문도 취소된다.
- 결제 완료된 주식 거래는 별도의 결제 내역으로 기록된다.

### 가상 쇼핑몰 기능
- 사용자는 가상 쇼핑몰의 상품을 조회할 수 있다.
- 상품은 카테고리별로 분류되어 있으며(전자제품, 의류, 생활용품 등), 카테고리별 필터링이 가능하다.
- 각 상품의 상세 정보를 확인할 수 있다.
- 사용자는 관심 상품을 장바구니에 담을 수 있다.
- 장바구니에서 상품 수량 조절 및 삭제가 가능하다.
- 결제는 주식으로만 가능하다.

### 장외 시간 처리 기능
- 주식 시장 휴장 시간(평일 15:30 이후, 주말, 공휴일)에도 매수/매도 주문 접수가 가능하다.
- 장외 시간 주문은 "예약 주문"으로 분류되어 처리된다.
- 예약 주문 시 전일 종가를 기준으로 예상 거래 금액이 계산되어 표시된다.
- 다음 개장일 09:00에 예약 주문이 자동으로 일반 주문으로 전환되어 체결 처리된다.
- 개장 후 실제 시세와 예상 시세의 차이로 인한 초과 금액은 사용자에게 정산된다.
- 개장 후 실제 시세와 예상 시세의 차이로 인해 금액이 부족할 경우, 거래는 취소된다.
- 사용자는 예약 주문 현황을 조회하고, 개장 전까지 주문을 취소할 수 있다.
- 주식 기반 결제도 장외 시간에 가능하며, 개장 후 실제 매도 체결 시 결제가 확정된다.
</br>

## ERD
![](https://velog.velcdn.com/images/jiw0707/post/2aeff770-3dae-45ea-aac5-18619e16139c/image.png)

